# 逻辑表达力小程序 - 21 天开发计划

## 项目目标

开发一个帮助用户提升逻辑表达能力的微信小程序，通过系统化的训练和练习，让用户掌握清晰、有条理的表达方式。

## 技术栈（推荐方案）

### 前端
- **框架**：微信小程序原生开发
- **语言**：TypeScript
- **UI 库**：WeUI / Vant Weapp
- **状态管理**：MobX（可选）
- **测试**：Jest + Miniprogram Simulate

### 后端（轻量级方案）
- **BaaS**：微信云开发 / Supabase
- **数据库**：云数据库
- **云函数**：处理业务逻辑
- **存储**：云存储（用户头像、音频等）

### AI 能力（可选）
- **LLM API**：OpenAI GPT-4 / Anthropic Claude
- **用途**：智能评估用户的逻辑表达

## 开发时间线（21 天）

### Week 1：基础搭建（Day 1-7）

#### Day 1：项目规划和设计
**目标**：完成项目规划和技术设计

**任务清单**：
- [ ] 使用 `/plan` 创建详细实施计划
- [ ] 使用 `@architect` 设计系统架构
- [ ] 定义数据模型
- [ ] 设计 API 接口
- [ ] 创建项目文档结构

**Claude Code 使用**：
```
/plan

项目需求：提升逻辑表达力的微信小程序

核心功能：
1. 逻辑题库（推理题、论证题、谬误识别）
2. 表达训练（结构化表达、论证框架）
3. 学习进度追踪
4. 简单的数据分析

技术栈：微信小程序原生 + 云开发

请创建详细的 21 天开发计划。
```

**产出**：
- 项目规划文档
- 系统架构图
- 数据模型设计
- API 接口文档

---

#### Day 2：项目初始化
**目标**：搭建项目基础框架

**任务清单**：
- [ ] 创建微信小程序项目
- [ ] 配置 TypeScript
- [ ] 初始化云开发环境
- [ ] 配置 Claude Code 项目规则
- [ ] 设置 Git 仓库和工作流
- [ ] 创建目录结构

**目录结构**：
```
logic-expression-miniapp/
├── miniprogram/              # 小程序源码
│   ├── pages/               # 页面
│   │   ├── index/          # 首页
│   │   ├── question-list/  # 题库列表
│   │   ├── question-detail/# 题目详情
│   │   ├── practice/       # 练习页面
│   │   ├── progress/       # 学习进度
│   │   └── profile/        # 个人中心
│   ├── components/         # 组件
│   │   ├── question-card/  # 题目卡片
│   │   ├── progress-chart/ # 进度图表
│   │   └── answer-input/   # 答案输入
│   ├── services/           # 服务层
│   │   ├── question.service.ts
│   │   ├── user.service.ts
│   │   └── ai.service.ts
│   ├── models/             # 数据模型
│   │   ├── question.model.ts
│   │   ├── user.model.ts
│   │   └── practice.model.ts
│   ├── utils/              # 工具函数
│   │   ├── request.ts
│   │   ├── storage.ts
│   │   └── validator.ts
│   ├── config/             # 配置
│   │   └── app.config.ts
│   └── app.ts              # 入口文件
├── cloudfunctions/         # 云函数
│   ├── getQuestions/       # 获取题目
│   ├── submitAnswer/       # 提交答案
│   └── evaluateLogic/      # AI 评估
├── tests/                  # 测试
│   ├── unit/
│   ├── integration/
│   └── e2e/
├── .claude/                # Claude Code 配置
│   └── CLAUDE.md
├── docs/                   # 文档
└── README.md
```

**Claude Code 配置**：
创建 `.claude/CLAUDE.md`：
```markdown
# 逻辑表达力小程序

## 项目信息
- 技术栈：微信小程序 + TypeScript + 云开发
- 开发模式：TDD
- 代码规范：ESLint + Prettier

## 强制规则
- 所有功能使用 TDD 开发
- 测试覆盖率 > 80%
- 代码提交前必须通过 code-review
- 敏感信息不得硬编码

## 使用的 Skills
- tdd-workflow
- coding-standards
- security-review

## Git 工作流
- 主分支：main
- 开发分支：develop
- 功能分支：feature/*
- 提交格式：feat/fix/docs/style/refactor/test/chore
```

**产出**：
- 完整的项目结构
- 配置好的开发环境
- Git 仓库

---

#### Day 3-4：数据模型和基础服务
**目标**：实现数据层和服务层

**任务清单**：
- [ ] 定义数据模型（Question, User, Practice）
- [ ] 实现数据库 Schema
- [ ] 创建云函数
- [ ] 实现基础服务层
- [ ] 编写单元测试

**使用 TDD 开发**：
```
/tdd

功能需求：题目数据模型和服务

数据模型：
- Question: 题目信息（标题、内容、难度、分类、答案）
- UserPractice: 用户练习记录

服务方法：
- getQuestions(): 获取题目列表
- getQuestionById(id): 获取题目详情
- submitAnswer(questionId, answer): 提交答案

请按 TDD 流程指导开发。
```

**数据模型示例**：
```typescript
// models/question.model.ts
export interface Question {
  id: string;
  title: string;
  content: string;
  type: 'reasoning' | 'argument' | 'fallacy';
  difficulty: 'easy' | 'medium' | 'hard';
  category: string;
  correctAnswer: string;
  explanation: string;
  createdAt: Date;
}

export interface UserPractice {
  id: string;
  userId: string;
  questionId: string;
  userAnswer: string;
  isCorrect: boolean;
  aiEvaluation?: AIEvaluation;
  completedAt: Date;
}

export interface AIEvaluation {
  score: number;
  strengths: string[];
  weaknesses: string[];
  suggestions: string[];
}
```

**产出**：
- 完整的数据模型
- 云函数代码
- 服务层代码
- 单元测试（覆盖率 > 80%）

---

#### Day 5-6：首页和题库列表
**目标**：实现首页和题库列表页面

**任务清单**：
- [ ] 设计页面 UI
- [ ] 实现首页（推荐题目、学习进度、快捷入口）
- [ ] 实现题库列表（筛选、排序、分页）
- [ ] 实现题目卡片组件
- [ ] 编写页面测试

**使用 TDD 开发**：
```
/tdd

功能需求：题库列表页面

需求：
1. 显示题目列表（标题、难度、分类、完成状态）
2. 支持按难度筛选（全部/简单/中等/困难）
3. 支持按分类筛选
4. 支持搜索
5. 点击题目进入详情页

请指导 TDD 开发。
```

**页面结构**：
```xml
<!-- pages/question-list/question-list.wxml -->
<view class="container">
  <!-- 筛选器 -->
  <view class="filter-bar">
    <view class="filter-item" bindtap="onDifficultyChange">
      难度: {{currentDifficulty}}
    </view>
    <view class="filter-item" bindtap="onCategoryChange">
      分类: {{currentCategory}}
    </view>
  </view>
  
  <!-- 题目列表 -->
  <view class="question-list">
    <question-card 
      wx:for="{{questions}}" 
      wx:key="id"
      question="{{item}}"
      bindtap="onQuestionTap"
    />
  </view>
</view>
```

**产出**：
- 首页和题库列表页面
- 题目卡片组件
- 页面测试

---

#### Day 7：代码审查和重构
**目标**：审查第一周代码，重构优化

**任务清单**：
- [ ] 运行 `/code-review` 审查所有代码
- [ ] 运行 `/refactor-clean` 清理代码
- [ ] 运行 `/test-coverage` 检查覆盖率
- [ ] 修复发现的问题
- [ ] 更新文档

**Claude Code 使用**：
```
/code-review

请全面审查本周完成的代码，重点检查：
1. 代码质量和可维护性
2. 性能问题
3. 安全隐患
4. 最佳实践

/refactor-clean

请清理项目中的：
1. 未使用的代码
2. 重复代码
3. 过时的注释

/test-coverage

请检查测试覆盖率，并为覆盖不足的模块补充测试。
```

**产出**：
- 代码审查报告
- 重构后的代码
- 完善的测试

---

### Week 2：核心功能（Day 8-14）

#### Day 8-9：题目详情和答题
**目标**：实现题目详情页和答题功能

**任务清单**：
- [ ] 实现题目详情页
- [ ] 实现答案输入组件
- [ ] 实现提交答案逻辑
- [ ] 实现答案验证
- [ ] 显示正确答案和解析
- [ ] 编写测试

**使用 TDD 开发**：
```
/tdd

功能需求：答题功能

需求：
1. 显示题目详细内容
2. 提供答案输入区域（文本/选择）
3. 提交答案
4. 显示是否正确
5. 显示正确答案和详细解析
6. 记录答题历史

请指导 TDD 开发。
```

**答题流程**：
```typescript
// pages/question-detail/question-detail.ts
Page({
  data: {
    question: null,
    userAnswer: '',
    showResult: false,
    isCorrect: false
  },
  
  async onSubmit() {
    // 1. 验证答案格式
    if (!this.validateAnswer()) return;
    
    // 2. 提交答案
    const result = await questionService.submitAnswer(
      this.data.question.id,
      this.data.userAnswer
    );
    
    // 3. 显示结果
    this.setData({
      showResult: true,
      isCorrect: result.isCorrect
    });
    
    // 4. 记录练习历史
    await practiceService.recordPractice(result);
  }
});
```

**产出**：
- 题目详情页
- 答题功能
- 结果展示
- 测试

---

#### Day 10-11：表达训练模块
**目标**：实现表达训练功能

**任务清单**：
- [ ] 设计表达训练页面
- [ ] 实现结构化表达模板
- [ ] 实现论证框架练习
- [ ] 实现文本输入和编辑
- [ ] 实现保存草稿功能
- [ ] 编写测试

**表达训练类型**：
1. **结构化表达**
   - 总分总结构
   - 递进式结构
   - 并列式结构

2. **论证框架**
   - 观点-论据-结论
   - 问题-分析-解决方案
   - 现象-原因-对策

**使用 TDD 开发**：
```
/tdd

功能需求：表达训练模块

需求：
1. 提供多种表达模板
2. 引导用户按结构填写
3. 实时保存草稿
4. 提交后可查看历史记录
5. 可选：AI 评估表达质量

请指导 TDD 开发。
```

**产出**：
- 表达训练页面
- 多种训练模板
- 草稿保存功能
- 测试

---

#### Day 12-13：学习进度和数据分析
**目标**：实现学习进度追踪和数据分析

**任务清单**：
- [ ] 实现学习进度页面
- [ ] 显示练习统计（总题数、正确率、学习时长）
- [ ] 实现能力雷达图
- [ ] 实现进步曲线
- [ ] 实现学习日历
- [ ] 编写测试

**数据统计**：
```typescript
// services/statistics.service.ts
export class StatisticsService {
  // 获取用户统计数据
  async getUserStats(userId: string): Promise<UserStats> {
    return {
      totalQuestions: 100,
      completedQuestions: 45,
      correctRate: 0.78,
      totalTime: 3600, // 秒
      streak: 7, // 连续学习天数
      abilityScores: {
        reasoning: 75,
        argument: 82,
        fallacy: 68
      }
    };
  }
  
  // 获取进步曲线数据
  async getProgressData(userId: string): Promise<ProgressData[]> {
    // 返回最近 30 天的正确率数据
  }
}
```

**使用 TDD 开发**：
```
/tdd

功能需求：学习进度和数据分析

需求：
1. 显示练习统计数据
2. 能力雷达图（推理、论证、谬误识别）
3. 进步曲线（最近 30 天）
4. 学习日历（标记学习日）
5. 成就徽章

请指导 TDD 开发。
```

**产出**：
- 学习进度页面
- 数据可视化组件
- 统计服务
- 测试

---

#### Day 14：Week 2 总结和优化
**目标**：审查和优化第二周代码

**任务清单**：
- [ ] 代码审查
- [ ] 性能优化
- [ ] 用户体验优化
- [ ] 补充测试
- [ ] 更新文档

**Claude Code 使用**：
```
/code-review
请审查本周代码

/test-coverage
检查测试覆盖率

请分析小程序性能，重点优化：
1. 页面加载速度
2. 列表渲染性能
3. 数据缓存策略
```

**产出**：
- 优化后的代码
- 性能报告
- 完善的测试

---

### Week 3：高级功能和上线（Day 15-21）

#### Day 15-16：AI 评估功能（可选）
**目标**：集成 LLM 进行智能评估

**任务清单**：
- [ ] 设计 AI 评估接口
- [ ] 实现云函数调用 LLM API
- [ ] 设计评估提示词
- [ ] 实现评估结果展示
- [ ] 编写测试

**AI 评估实现**：
```typescript
// cloudfunctions/evaluateLogic/index.ts
export async function evaluateLogic(userAnswer: string, question: Question) {
  const prompt = `
你是一位逻辑表达专家，请评估以下答案的逻辑性：

题目：${question.content}
用户答案：${userAnswer}

请从以下维度评估（1-10分）：
1. 逻辑清晰度
2. 论证完整性
3. 表达准确性

并提供：
- 优点（2-3条）
- 不足（2-3条）
- 改进建议（2-3条）

以 JSON 格式返回。
  `;
  
  const response = await callLLMAPI(prompt);
  return parseEvaluation(response);
}
```

**使用 TDD 开发**：
```
/tdd

功能需求：AI 智能评估

需求：
1. 调用 LLM API 评估用户答案
2. 返回结构化评估结果
3. 显示评分和详细反馈
4. 保存评估历史

请指导 TDD 开发。
```

**产出**：
- AI 评估云函数
- 评估结果展示页面
- 测试

---

#### Day 17：个人中心和设置
**目标**：实现个人中心功能

**任务清单**：
- [ ] 实现个人中心页面
- [ ] 显示用户信息
- [ ] 实现设置功能
- [ ] 实现关于页面
- [ ] 编写测试

**功能列表**：
- 用户信息（头像、昵称、学习天数）
- 学习统计概览
- 设置（通知、隐私、清除缓存）
- 关于（版本、隐私政策、用户协议）
- 反馈建议

**产出**：
- 个人中心页面
- 设置功能
- 测试

---

#### Day 18：E2E 测试
**目标**：编写完整的端到端测试

**任务清单**：
- [ ] 编写核心用户流程的 E2E 测试
- [ ] 测试所有页面跳转
- [ ] 测试数据持久化
- [ ] 测试异常情况
- [ ] 生成测试报告

**使用 Claude Code**：
```
/e2e

请为以下用户流程生成 E2E 测试：

流程 1：新用户首次使用
1. 打开小程序
2. 授权登录
3. 查看首页推荐
4. 进入题库列表
5. 选择一道题目
6. 完成答题
7. 查看结果和解析

流程 2：老用户日常练习
1. 打开小程序
2. 继续上次未完成的题目
3. 完成答题
4. 查看学习进度
5. 查看数据分析

流程 3：表达训练
1. 进入表达训练
2. 选择训练模板
3. 填写内容
4. 保存草稿
5. 提交训练
6. 查看 AI 评估（如果有）
```

**产出**：
- 完整的 E2E 测试套件
- 测试报告

---

#### Day 19：安全检查和性能优化
**目标**：全面安全检查和性能优化

**任务清单**：
- [ ] 安全审查
- [ ] 性能优化
- [ ] 代码混淆
- [ ] 资源压缩
- [ ] 最终测试

**使用 Claude Code**：
```
/security-review

请全面检查小程序安全性：
1. 数据传输安全
2. 用户隐私保护
3. API 安全
4. 敏感信息处理
5. 权限使用

请优化小程序性能：
1. 减小包体积
2. 优化首屏加载
3. 优化图片资源
4. 优化数据请求
5. 优化渲染性能
```

**产出**：
- 安全检查报告
- 性能优化报告
- 优化后的代码

---

#### Day 20：准备上线材料
**目标**：准备小程序审核所需材料

**任务清单**：
- [ ] 编写小程序简介
- [ ] 准备截图和演示视频
- [ ] 编写隐私政策
- [ ] 编写用户协议
- [ ] 准备审核说明
- [ ] 配置小程序信息

**使用 Claude Code**：
```
请帮我准备小程序上线材料：

1. 小程序简介（30字以内）
2. 功能介绍（200字以内）
3. 隐私政策
4. 用户协议
5. 审核说明

小程序信息：
- 名称：逻辑表达力训练
- 类型：教育学习
- 核心功能：逻辑题库、表达训练、学习进度
```

**产出**：
- 完整的上线材料
- 配置好的小程序信息

---

#### Day 21：提交审核和发布
**目标**：提交小程序审核并发布

**任务清单**：
- [ ] 最终测试
- [ ] 上传代码
- [ ] 提交审核
- [ ] 准备运营计划
- [ ] 编写项目总结

**发布流程**：
1. 在微信开发者工具中上传代码
2. 登录小程序管理后台
3. 提交审核
4. 等待审核（通常 1-7 天）
5. 审核通过后发布

**产出**：
- 已提交审核的小程序
- 运营计划
- 项目总结文档

---

## 每日工作流程

### 开始工作前
```bash
# 1. 拉取最新代码
git pull origin develop

# 2. 创建功能分支
git checkout -b feature/question-list

# 3. 在 Claude Code 中规划今日任务
/plan
今日任务：实现题库列表功能
```

### 开发过程中
```bash
# 1. 使用 TDD 开发
/tdd
功能需求：[描述]

# 2. 定期提交代码
git add .
git commit -m "feat: 实现题库列表基础功能"

# 3. 遇到问题时
@architect / @code-reviewer
[描述问题]
```

### 结束工作时
```bash
# 1. 代码审查
/code-review
请审查今天的代码

# 2. 运行测试
npm test

# 3. 提交代码
git push origin feature/question-list

# 4. 更新文档
# 记录今日完成的功能和遇到的问题
```

## 质量保证

### 代码质量
- ✅ 所有功能使用 TDD 开发
- ✅ 测试覆盖率 > 80%
- ✅ 每日代码审查
- ✅ 定期重构清理

### 性能标准
- ✅ 首屏加载 < 2s
- ✅ 页面切换 < 300ms
- ✅ 包体积 < 2MB
- ✅ 内存使用 < 50MB

### 安全标准
- ✅ 数据传输加密
- ✅ 用户隐私保护
- ✅ API 安全验证
- ✅ 敏感信息不硬编码

## 风险和应对

### 风险 1：开发进度延迟
**应对措施**：
- 优先实现核心功能（MVP）
- 将高级功能（AI 评估）标记为可选
- 每周审查进度，及时调整计划

### 风险 2：技术难点
**应对措施**：
- 使用 Claude Code 的 architect 和 code-reviewer 代理
- 提前进行技术预研
- 准备备选方案

### 风险 3：审核不通过
**应对措施**：
- 严格遵守微信小程序规范
- 提前准备完善的审核材料
- 确保隐私政策和用户协议完整

## 项目交付标准

### 功能完整性
- ✅ 所有核心功能已实现
- ✅ 所有页面已完成
- ✅ 所有交互已测试

### 代码质量
- ✅ 测试覆盖率 > 80%
- ✅ 代码审查通过
- ✅ 安全检查通过
- ✅ 性能达标

### 文档完整性
- ✅ README.md
- ✅ API 文档
- ✅ 部署文档
- ✅ 用户手册

### 上线准备
- ✅ 审核材料齐全
- ✅ 已提交审核
- ✅ 运营计划就绪

---

**现在，让我们开始这 21 天的开发之旅吧！** 🚀
